**************************************************************************************************************************************************************************************************
*
*     888888               888888 	        888888     .o888888888888o.     8888  		88888888888	o888888888888888     88888888888888o	88888888888   88888888888   8888888888o
*       88888             88888888             88888      .8888888  8888888.    8888  		88888888888    o8888888888888888     888888  8888888o	88888888888   88888888888   88888888888o
*        88888           8888  8888           88888      .8888888.  .8888888.   8888  		8888	       888888888	     888888  88888888	8888	      8888	    8888   88888
*         88888         8888    8888         88888       88888888    88888888   8888		8888   	       888888888	     888888  88888888	8888	      8888	    8888   88888
*	   88888       8888      8888       88888        88888888    88888888   8888  		8888888	       o888888888888888o     888888  8888888o	8888888	      8888888	    8888   88888
*	    88888     8888        8888     88888	 88888888    88888888   8888  		8888888		o888888888888888o    88888888888888o	8888888	      8888888       8888   88888
*	     88888   8888          8888   88888          88888888    88888888   8888  		8888		         88888888    8888		8888	      8888	    8888   88888
*	      88888 8888            8888 88888  	 .8888888.  .8888888.   8888  		8888 			 88888888    8888		8888	      8888	    8888   88888
*	       88888888	 	     88888888		  .8888888  8888888.    88888888888	8888		8888888888888888o    8888		88888888888   88888888888   88888888888o
*		888888		      888888  		   .o888888888888o.     88888888888	8888		888888888888888o     8888		88888888888   88888888888   8888888888o
*
**************************************************************************************************************************************************************************************************
*******************************************************************************
*******************************************************************************
**	DISCLAIMER
*******************************************************************************
**	This model is provided as is, where is, and with no warranty of any kind
**	either expressed or implied, including but not limited to any implied 
**	warranties of merchantability and fitness for a particular purpose.
*******************************************************************************

***********************************************************
****	Wolfspeed SiC MOSFET C3M0120090D Spice Library 
****	Version 1.0 Date: 07-03-2018
***********************************************************
****	Revision record
****	Version 1	Initial Release
*********************************************************************************
****Parasitics Included
****Tj = Junction Temperature
****Tc = Case Temperature
****D = Drain
****G = Gate
****S = Source
***********************************************************

.subckt C3M0120090D d g s Tj Tc 

xgmos	d3 d1 g1 s1 Tj Tc gmos_C3M0120090D

RS		s	sa	2.071m
Ls 		sa	s1	4.026n
*R_Ls 		sa	s1	5

R_g 		g1	g2	16
RG		g	ga	49.26m
Lg 		ga	g3	15.43n
R_Lg		ga	g3	10

Rd		d	da	64.94u
Ld 		da	d3      3.848n
R_Ld		da	d3	6 

G1		d2	d1      Value {V(d1,s1)}
R_A		d2	d1	1E6

vgate_s		g3	g2	0
vdrain_s	d3	d2	0
Gheat		0	Tj	value {abs((V(d,s)*I(Vdrain_s)))+abs((V(g1,g2)*I(Vgate_s)))}

xCGD		d2	g1	cgdmos_C3M0120090D 
CGS		g1	s1	347p
xCds		d2	s1	cdsmos_C3M0120090D
D1		s1	d2	bodydiode_C3M0120090D
*cgd1		d2	g1	1p	


R0 N1 Tj 150m
R1 N2 N1 513m
R2 N3 N2 358m
R3 Tc N3 282m
C0 Tj 0 452u
C1 N1 0 1.6m
C2 N2 0 7.52m
C3 N3 0 114m

.ends C3M0120090D

*****************************************

.subckt gmos_C3M0120090D d3 d1 g1 s1 Tj Tc

e3		NET3	0	Value {10u*(V(Tj)**2)-0.0068*V(Tj)+2.3439}
R_C		NET3	0 	1E6

e2		NET2	0	Value {-0.005*v(gk,s1)+0.165}
R_B		NET2	0 	1E6

e1		NET1	0	Value {-171.7m*v(gk,s1)+3.5755}
R_a		NET1	0 	1E6

e4		NET4	0	value {
+				if(V(Tj)>50,
+					0.05 
+					,
+					0.32
+					)
+					}    
R_d		NET4	0 	1E6

e5		NET5	0	value {
+				if(V(gk,s1)>13.5,
+					-1.6024u*(V(Tj)**2)-135.57u*v(Tj)+0.16439   
+					,
+					0
+					)
+					}
R_e		NET5	0 	1E6

e6		NET6	0	value {
+				if(V(gk,s1)>11.5 & V(gk,s1)<=13.5,
+					-1.5829u*(V(Tj)**2)-34.9878u*v(Tj)+0.15086
+					,
+					0
+					)
+					}
R_f		NET6	0 	1E6

e7		NET7	0	value {
+				if(V(gk,s1)>9.5 & V(gk,s1)<=11.5,
+					-1.88u*(V(Tj)**2)+136.512u*v(Tj)+0.138
+					,
+					0
+					)
+					}
R_g		NET7	0 	1E6

e8		NET8	0	value {
+				if(V(gk,s1)>7.5 & V(gk,s1)<=9.5,
+					-1.8u*(V(Tj)**2)+268.975u*v(Tj)+0.117   
+					,
+					0
+					)
+					}
R_h		NET8	0 	1E6

e9		NET9	0	value {
+				if(V(gk,s1)>V(NET3,0) & V(gk,s1)<=7.5,
+					-1.211u*(V(Tj)**2)+408.58u*v(Tj)+87.54m   
+					,
+					0
+					)
+					}
R_j		NET9	0 	1E6



.param p8  = 0.0011
.param p9  = -0.102
.param p11 = -8
.param p12 = 19

R100 gk s1	1E6
E100 gk s1 	value {limit(V(g1,s1),p11,p12)} 


********************************
G1 d1 s1 value {
+	if(V(s1,d3)<0,
+		0
+		,
+		if (V(gk,s1)<V(NET3,0) ,
+		-((0.035)*(v(gk,s1)-V(NET3,0)))*(-(1+p8*v(s1,d3))*0.008)*(((log(1+exp(v(gk,s1)-V(NET3,0))))**2)-
+		((log(1+exp(v(gk,s1)-V(NET3,0)-(0.854*v(s1,d3)))))**2))
+		,
+		-(((v(NET5,0)+v(NET6,0)+v(NET7,0)+v(NET8,0)+v(NET9,0))*(v(gk,s1)-V(NET3,0)))+v(NET4,0))*(1+p8*v(s1,d3))*
+		(((log(1+exp(v(gk,s1)-V(NET3,0))))**2)-((log(1+exp(v(gk,s1)-V(NET3,0)-
+		(V(NET2,0)*v(s1,d3)*((1+exp(p9*v(s1,d3)))**v(NET1,0))))))**2))
+		)
+			)
+			}
G2 d1 s1 value {
+	if(V(d3,s1)<0,
+		0
+		,
+		if (V(gk,s1)<V(NET3,0) ,
+		((0.035)*(v(gk,s1)-V(NET3,0)))*(-(1+p8*v(d3,s1))*0.008)*(((log(1+exp(v(gk,s1)-V(NET3,0))))**2)-
+		((log(1+exp(v(gk,s1)-V(NET3,0)-(0.854*v(d3,s1)))))**2))
+		,
+		(((v(NET5,0)+v(NET6,0)+v(NET7,0)+v(NET8,0)+v(NET9,0))*(v(gk,s1)-V(NET3,0))))*(1+p8*v(d3,s1))*
+		(((log(1+exp(v(gk,s1)-V(NET3,0))))**2)-((log(1+exp(v(gk,s1)-V(NET3,0)-
+		(V(NET2,0)*v(d3,s1)*((1+exp(p9*v(d3,s1)))**v(NET1,0))))))**2))
+		)
+			)
+			}


.ends gmos_C3M0120090D

****************************************
.model bodydiode_C3M0120090D d(is=238.9n bv=1160 EG=5.02827 n=7.65 
+	rs=0.099 trs1=-0.0006  trs2=-14.003u Tnom=25
+	tt=0n ibv=500u Xti=0.13 level=1)
****************************************

.subckt cgdmos_C3M0120090D d2 g1 
.param k1=100p
.param k2=0.40
.param ka=65
.param kb=0.2
.param kc=7.5277

R500 dv g1	1E6
E500 dv g1 	value {limit(V(d2,g1),0,560)}

G11 g1 d1 value {
+		k1*(
+		(1+v(dv,g1)*(1+ka*(1+TANH(kb*V(dv,g1)-kc))/2))**-k2
+		)*ddt(v(g1,d2))
+			}
R_CGD d1 d2 0.1
.ends cgdmos_C3M0120090D

.subckt cdsmos_C3M0120090D d2 s1
.param Cjo = 750p
.param Vj  = 5.7
.param M   = 0.65


G12 d1 s1 value {
+	if(V(d2,s1)>0,
+		(Cjo/(1+((limit(ABS(v(d2,s1)),0,560))/Vj))**M)*ddt(v(d2,s1))
+		,
+		0
+			)
+			}

R_CDS d1 d2 1
.ends cdsmos_C3M0120090D







